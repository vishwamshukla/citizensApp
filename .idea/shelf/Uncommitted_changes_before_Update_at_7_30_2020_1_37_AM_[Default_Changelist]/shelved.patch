Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.google.gms.google-services'\r\nrepositories {\r\n    maven {\r\n        url  \"https://dl.bintray.com/ibm-cloud-sdks/ibm-cloud-sdk-repo\"\r\n    }\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 29\r\n    buildToolsVersion \"29.0.3\"\r\n    defaultConfig.applicationId = \"com.example.citizensapp\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.citizensapp\"\r\n        minSdkVersion 23\r\n        targetSdkVersion 29\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation 'androidx.appcompat:appcompat:1.1.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\r\n    implementation 'com.google.firebase:firebase-auth:19.3.2'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'com.google.android.material:material:1.1.0'\r\n    implementation 'androidx.navigation:navigation-fragment:2.3.0'\r\n    implementation 'androidx.navigation:navigation-ui:2.3.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'com.google.firebase:firebase-database:19.3.1'\r\n    implementation 'com.google.firebase:firebase-storage:19.1.1'\r\n    implementation 'com.google.firebase:firebase-auth:19.3.2'\r\n    implementation 'com.google.firebase:firebase-core:17.4.4'\r\n    implementation 'com.google.android.material:material:1.1.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\r\n    implementation 'com.firebaseui:firebase-ui-database:0.4.0'\r\n\r\n    //ImageView\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    //CardView\r\n    //noinspection GradleCompatible\r\n    implementation 'com.android.support:cardview-v7:28.0.0'\r\n\r\n    //GoogleSignIn\r\n    implementation 'com.google.android.gms:play-services-auth:18.0.0'\r\n\r\n    implementation 'com.squareup.picasso:picasso:2.71828'\r\n    implementation 'com.theartofdev.edmodo:android-image-cropper:2.7.+'\r\n\r\n    //glide\r\n    implementation 'com.github.bumptech.glide:glide:4.8.0'\r\n\r\n    //facebook and twitter\r\n    implementation 'com.facebook.android:facebook-login:6.1.0'\r\n    implementation('com.twitter.sdk.android:twitter:2.3.2') {\r\n        transitive = true\r\n    }\r\n\r\n    implementation 'com.ibm.watson:assistant:8.1.0'\r\n    implementation 'com.ibm.watson:text-to-speech:8.1.0'\r\n    implementation 'com.ibm.watson:speech-to-text:8.1.0'\r\n    implementation 'com.ibm.watson.developer_cloud:android-sdk:0.5.0'\r\n\r\n    //GoogleMap\r\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\r\n    implementation 'com.google.android.gms:play-services-location:17.0.0'\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision d1950a1a8b7ba9f725fe1493ecadb36f0ba36dab)
+++ app/build.gradle	(date 1596052301445)
@@ -81,4 +81,6 @@
     implementation 'com.google.android.gms:play-services-maps:17.0.0'
     implementation 'com.google.android.gms:play-services-location:17.0.0'
 
+
+
 }
Index: app/src/main/java/com/example/citizensapp/ReportPotholeActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.citizensapp;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.cardview.widget.CardView;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.content.FileProvider;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.app.ActionBar;\r\nimport android.content.ContentResolver;\r\nimport android.content.Context;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Typeface;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.NetworkInfo;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.os.Message;\r\nimport android.provider.MediaStore;\r\nimport android.speech.RecognizerIntent;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.webkit.MimeTypeMap;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.MediaController;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\nimport android.widget.VideoView;\r\n\r\nimport com.google.android.gms.tasks.Continuation;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.OnProgressListener;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.StorageTask;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\nimport java.io.InputStream;\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\nimport com.ibm.cloud.sdk.core.http.HttpMediaType;\r\nimport com.ibm.cloud.sdk.core.http.Response;\r\nimport com.ibm.cloud.sdk.core.http.ServiceCall;\r\nimport com.ibm.cloud.sdk.core.security.IamAuthenticator;\r\nimport com.ibm.watson.assistant.v2.model.DialogNodeOutputOptionsElement;\r\nimport com.ibm.watson.assistant.v2.model.RuntimeResponseGeneric;\r\nimport com.ibm.watson.developer_cloud.android.library.audio.MicrophoneHelper;\r\nimport com.ibm.watson.developer_cloud.android.library.audio.MicrophoneInputStream;\r\nimport com.ibm.watson.developer_cloud.android.library.audio.StreamPlayer;\r\nimport com.ibm.watson.developer_cloud.android.library.audio.utils.ContentType;\r\nimport com.ibm.watson.assistant.v2.Assistant;\r\nimport com.ibm.watson.assistant.v2.model.CreateSessionOptions;\r\nimport com.ibm.watson.assistant.v2.model.MessageInput;\r\nimport com.ibm.watson.assistant.v2.model.MessageOptions;\r\nimport com.ibm.watson.assistant.v2.model.MessageResponse;\r\nimport com.ibm.watson.assistant.v2.model.SessionResponse;\r\nimport com.ibm.watson.speech_to_text.v1.SpeechToText;\r\nimport com.ibm.watson.speech_to_text.v1.model.RecognizeOptions;\r\nimport com.ibm.watson.speech_to_text.v1.model.SpeechRecognitionResults;\r\nimport com.ibm.watson.speech_to_text.v1.websocket.BaseRecognizeCallback;\r\nimport com.ibm.watson.text_to_speech.v1.TextToSpeech;\r\nimport com.ibm.watson.text_to_speech.v1.model.SynthesizeOptions;\r\n\r\npublic class ReportPotholeActivity extends AppCompatActivity {\r\n//    private RecyclerView recyclerView;\r\n//    private ChatAdapter mAdapter;\r\n    private ArrayList messageArrayList;\r\n    private EditText inputMessage;\r\n    private ImageButton btnSend;\r\n    private ImageButton btnRecord;\r\n    StreamPlayer streamPlayer = new StreamPlayer();\r\n    private boolean initialRequest;\r\n    private boolean permissionToRecordAccepted = false;\r\n    private static final int REQUEST_RECORD_AUDIO_PERMISSION = 200;\r\n    private static String TAG = \"MainActivity\";\r\n    private static final int RECORD_REQUEST_CODE = 101;\r\n    private boolean listening = false;\r\n    private MicrophoneInputStream capture;\r\n    private Context mContext;\r\n    private MicrophoneHelper microphoneHelper;\r\n\r\n    private Assistant watsonAssistant;\r\n    private Response<SessionResponse> watsonAssistantSession;\r\n    private SpeechToText speechService;\r\n    private TextToSpeech textToSpeech;\r\n\r\n\r\n\r\n    private static final int PICK_VIDEO_REQUEST=1;\r\n    private static final int PICK_IMAGE_REQUEST = 1;\r\n    public static final int CAMERA_PERM_CODE = 101;\r\n    public static final int CAMERA_REQUEST_CODE = 102;\r\n\r\n    private ImageView backButton;\r\n    private Button mButtonUpload, videoUploadnew;\r\n    private TextInputLayout mEditTextPothole_Type, mEditTextAddress, mEditTextLandmark, mEditTextDimensions, mEditTextComments;\r\n    private ImageView mImageView;\r\n    private TextView button_remove_image;\r\n    Integer REQUEST_CAMERA = 0;\r\n    private VideoView mVideoView;\r\n    String currentPhotoPath;\r\n\r\n    // MediaController mediaController;\r\n\r\n    private ProgressBar mProgressBar;\r\n\r\n    private Uri mImageUri;\r\n\r\n    private StorageReference mStorageRef;\r\n    private DatabaseReference mDatabaseRef;\r\n\r\n    private StorageTask mUploadTask;\r\n\r\n    private FirebaseAuth mAuth;\r\n    String currentUserID;\r\n\r\n\r\n\r\n    private void createServices() {\r\n//        watsonAssistant = new Assistant(\"2019-02-28\", new IamAuthenticator(mContext.getString(R.string.assistant_apikey)));\r\n//        watsonAssistant.setServiceUrl(mContext.getString(R.string.assistant_url));\r\n\r\n        textToSpeech = new TextToSpeech(new IamAuthenticator((mContext.getString(R.string.TTS_apikey))));\r\n        textToSpeech.setServiceUrl(mContext.getString(R.string.TTS_url));\r\n\r\n        speechService = new SpeechToText(new IamAuthenticator(mContext.getString(R.string.STT_apikey)));\r\n        speechService.setServiceUrl(mContext.getString(R.string.STT_url));\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_report_pothole);\r\n\r\n        inputMessage = findViewById(R.id.potholes_comments_textview);\r\n        btnRecord = findViewById(R.id.btn_record);\r\n//        String customFont = \"Montserrat-Regular.ttf\";\r\n//        Typeface typeface = Typeface.createFromAsset(getAssets(), customFont);\r\n//        inputMessage.setTypeface(typeface);\r\n\r\n        microphoneHelper = new MicrophoneHelper(this);\r\n        int permission = ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.RECORD_AUDIO);\r\n\r\n        if (permission != PackageManager.PERMISSION_GRANTED) {\r\n            Log.i(TAG, \"Permission to record denied\");\r\n            makeRequest();\r\n        } else {\r\n            Log.i(TAG, \"Permission to record was already granted\");\r\n        }\r\n\r\n        btnRecord.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                getSpeechInput(v);\r\n            }\r\n        });\r\n\r\n        //createServices();\r\n\r\n\r\n\r\n//        videoUploadnew = findViewById(R.id.video_view_button);\r\n//        videoUploadnew.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View v) {\r\n//                uploadFile1();\r\n//                startActivity(new Intent(ReportPotholeActivity.this, UploadVideoActivity.class));\r\n//            }\r\n//        });\r\n\r\n\r\n\r\n        mProgressBar=findViewById(R.id.progress_bar);\r\n        button_remove_image = findViewById(R.id.pothole_remove_image_button);\r\n\r\n        mButtonUpload = findViewById(R.id.p_button_continue);\r\n        mImageView = findViewById(R.id.pothole_image_view);\r\n        mProgressBar = findViewById(R.id.progress_bar);\r\n        mEditTextPothole_Type = findViewById(R.id.pothole_type_textView);\r\n        mEditTextAddress = findViewById(R.id.pothole_address_textView);\r\n       // mEditTextComments = findViewById(R.id.potholes_comments_textview);\r\n        mEditTextDimensions = findViewById(R.id.pothole_dimension_textview);\r\n        mEditTextLandmark = findViewById(R.id.pothole_landmark_textview);\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        currentUserID = mAuth.getCurrentUser().getUid();\r\n\r\n        mStorageRef = FirebaseStorage.getInstance().getReference(\"Reported Potholes\");\r\n        mDatabaseRef = FirebaseDatabase.getInstance().getReference(\"Users\").child(\"Citizens\").child(currentUserID).child(\"potholeReports\");\r\n\r\n\r\n\r\n        mButtonUpload.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if (mUploadTask!= null && mUploadTask.isInProgress()){\r\n                    {\r\n                        Toast.makeText(ReportPotholeActivity.this, \"Upload in Process\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n                else {\r\n                    uploadFile();\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n        CardView image_layout = findViewById(R.id.pothole_image_layout);\r\n        image_layout.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                final CharSequence[] items ={\"Open Camera\",\"Upload from Gallery\"};\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(ReportPotholeActivity.this);\r\n                builder.setItems(items, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        if (items[i].equals(\"Open Camera\")){\r\n                            askCameraPermissions();\r\n                            update_imageView_layout(true);\r\n                        }\r\n                        else if (items[i].equals(\"Upload from Gallery\")){\r\n                            OpenImageFileChooser();\r\n                            update_imageView_layout(true);\r\n                        }\r\n                    }\r\n                });\r\n                builder.show();\r\n            }\r\n        });\r\n\r\n        backButton = findViewById(R.id.back_button);\r\n        backButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                ReportPotholeActivity.this.finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void SelectVideo(){\r\n        Intent intent = new Intent();\r\n        intent.setType(\"video/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(intent,PICK_VIDEO_REQUEST);\r\n    }\r\n\r\n    private void initiate_remove_image_button(){\r\n        button_remove_image.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //TODO: Delete image from the view when this button is clicked.\r\n                update_imageView_layout(false);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void update_imageView_layout(Boolean isImageLoaded){\r\n        LinearLayout hint_view = findViewById(R.id.upload_image_hint_view);\r\n        if (isImageLoaded){\r\n            hint_view.setVisibility(View.GONE);\r\n            button_remove_image.setVisibility(View.VISIBLE);\r\n            initiate_remove_image_button();\r\n        }\r\n        else{\r\n            hint_view.setVisibility(View.VISIBLE);\r\n            button_remove_image.setVisibility(View.GONE);\r\n            mImageView.setImageResource(0);\r\n        }\r\n    }\r\n\r\n    private void askCameraPermissions() {\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA)!= PackageManager.PERMISSION_GRANTED){\r\n            ActivityCompat.requestPermissions(this,new String[] {Manifest.permission.CAMERA}, CAMERA_PERM_CODE);\r\n        }else\r\n        {\r\n            dispatchTakePictureIntent();\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        if (requestCode == CAMERA_PERM_CODE){\r\n            if (grantResults.length>0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                dispatchTakePictureIntent();\r\n            }\r\n            else{\r\n                Toast.makeText(this, \"Camera Permission needed\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void OpenImageFileChooser(){\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(intent, PICK_IMAGE_REQUEST);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE_REQUEST  && resultCode == RESULT_OK\r\n                && data != null && data.getData() != null){\r\n            mImageUri = data.getData();\r\n            Picasso.get().load(mImageUri).into(mImageView);\r\n        }     else if (requestCode == CAMERA_REQUEST_CODE && resultCode == RESULT_OK){\r\n            File f = new File(currentPhotoPath);\r\n            mImageView.setImageURI(Uri.fromFile(f));\r\n            mImageUri = Uri.fromFile(f);\r\n        }\r\n\r\n        switch (requestCode){\r\n\r\n            case 10:\r\n                if (resultCode == RESULT_OK && data != null) {\r\n                    ArrayList<String> result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);\r\n                    inputMessage.setText(result.get(0));\r\n                }\r\n                break;\r\n        }\r\n\r\n\r\n        }\r\n\r\n\r\n        /*if (requestCode == PICK_VIDEO_REQUEST && resultCode == RESULT_OK\r\n                && data != null && data.getData() != null) {\r\n\r\n            mVideoUri = data.getData();\r\n\r\n            mVideoView.setVideoURI(mVideoUri);\r\n        }*/\r\n\r\n    private File createImageFile() throws IOException {\r\n        // Create an image file name\r\n        String timeStamp = new SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(new Date());\r\n        String imageFileName = \"JPEG_\" + timeStamp + \"_\";\r\n        File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n        File image = File.createTempFile(\r\n                imageFileName,  /* prefix */\r\n                \".jpg\",         /* suffix */\r\n                storageDir      /* directory */\r\n        );\r\n\r\n        // Save a file: path for use with ACTION_VIEW intents\r\n        currentPhotoPath = image.getAbsolutePath();\r\n        return image;\r\n    }\r\n\r\n    private void dispatchTakePictureIntent() {\r\n        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        // Ensure that there's a camera activity to handle the intent\r\n        if (takePictureIntent.resolveActivity(getPackageManager()) != null) {\r\n            // Create the File where the photo should go\r\n            File photoFile = null;\r\n            try {\r\n                photoFile = createImageFile();\r\n            } catch (IOException ex) {\r\n            }\r\n            // Continue only if the File was successfully created\r\n            if (photoFile != null) {\r\n                Uri photoURI = FileProvider.getUriForFile(this,\r\n                        \"com.example.android.fileprovider\",\r\n                        photoFile);\r\n                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);\r\n                startActivityForResult(takePictureIntent, CAMERA_REQUEST_CODE);\r\n            }\r\n        }\r\n    }\r\n\r\n    private String getFileExtension(Uri uri) {\r\n        ContentResolver cR = getContentResolver();\r\n        MimeTypeMap mime = MimeTypeMap.getSingleton();\r\n        return mime.getExtensionFromMimeType(cR.getType(uri));\r\n    }\r\n\r\n    private void uploadFile(){\r\n        if (mImageUri != null) {\r\n            mProgressBar.setVisibility(View.VISIBLE);\r\n            final StorageReference fileReference = mStorageRef.child(System.currentTimeMillis()\r\n                    + \".\" + getFileExtension(mImageUri));\r\n            mUploadTask = fileReference.putFile(mImageUri)\r\n                    .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            mProgressBar.setProgress(0);\r\n                            fileReference.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                @Override\r\n                                public void onSuccess(final Uri uri) {\r\n                                    mProgressBar.setVisibility(View.INVISIBLE);\r\n\r\n                                    DateFormat dateFormat = new SimpleDateFormat(\"dd/MM\");\r\n                                    Date date = new Date();\r\n\r\n                                    DateFormat datefull = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n                                    Date date1 = new Date();\r\n                                    DateFormat timeformat = new SimpleDateFormat(\"HH:mm:ss\");\r\n                                    Date time = new Date();\r\n                                    String mPotholeType = mEditTextPothole_Type.getEditText().getText().toString();\r\n                                    String mAddress = mEditTextAddress.getEditText().getText().toString();\r\n                                    String mLandmark = mEditTextLandmark.getEditText().getText().toString();\r\n                                    String mDimension = mEditTextDimensions.getEditText().getText().toString().trim();\r\n                                    String mComment = inputMessage.getText().toString();\r\n                                    String mDate = dateFormat.format(date).toString();\r\n                                    String mDateFull = datefull.format(date1).toString();\r\n                                    String mTime = timeformat.format(time).toString();\r\n\r\n//                                    mDatabaseRef.child(currentUserID).addValueEventListener(new ValueEventListener() {\r\n//                                        @Override\r\n//                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                                            if(snapshot.exists()){\r\n//                                                if (snapshot.child(\"videourl\").exists()){\r\n//                                                    String mVideo = String.valueOf(snapshot.child(\"videourl\").getValue());\r\n//                                                    DateFormat dateFormat = new SimpleDateFormat(\"dd/MM\");\r\n//                                                    Date date = new Date();\r\n//\r\n//                                                    DateFormat datefull = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n//                                                    Date date1 = new Date();\r\n//                                                    DateFormat timeformat = new SimpleDateFormat(\"HH:mm:ss\");\r\n//                                                    Date time = new Date();\r\n//                                                    String mPotholeType = mEditTextPothole_Type.getEditText().getText().toString();\r\n//                                                    String mAddress = mEditTextAddress.getEditText().getText().toString();\r\n//                                                    String mLandmark = mEditTextLandmark.getEditText().getText().toString();\r\n//                                                    String mDimension = mEditTextDimensions.getEditText().getText().toString().trim();\r\n//                                                    String mComment = mEditTextComments.getEditText().getText().toString();\r\n//                                                    String mDate = dateFormat.format(date).toString();\r\n//                                                    String mDateFull = datefull.format(date1).toString();\r\n//                                                    String mTime = timeformat.format(time).toString();\r\n//\r\n//                                                   // DatabaseReference ref = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(\"Citizens\");\r\n//\r\n//                                                    HashMap<String, Object> userMap = new HashMap<>();\r\n//                                                    userMap.put(\"ImageUrl\", uri.toString());\r\n//                                                    userMap.put(\"mPotholeType\", mPotholeType);\r\n//                                                    userMap.put(\"mAddress\", mAddress);\r\n//                                                    userMap.put(\"mLandmark\", mLandmark);\r\n//                                                    userMap.put(\"mDimension\", mDimension);\r\n//                                                    userMap.put(\"mComment\", mComment);\r\n//                                                    userMap.put(\"mDate\", mDate);\r\n//                                                    userMap.put(\"mDateFull\", mDateFull);\r\n//                                                    userMap.put(\"mTime\", mTime);\r\n//                                                    userMap.put(\"mVideo\", mVideo);\r\n//\r\n//                                                    mDatabaseRef.child(currentUserID).updateChildren(userMap);\r\n//\r\n//                                                }\r\n//                                            }\r\n//                                        }\r\n//\r\n//                                        @Override\r\n//                                        public void onCancelled(@NonNull DatabaseError error) {\r\n//\r\n//                                        }\r\n//                                    });\r\n\r\n                                    Upload upload = new Upload(uri.toString(), mPotholeType, mAddress, mLandmark, mDimension, mComment, mDate, mDateFull, mTime);\r\n                                    String uploadId = mDatabaseRef.push().getKey();\r\n                                    assert uploadId != null;\r\n                                    mDatabaseRef.child(uploadId).setValue(upload);\r\n\r\n                                    Toast.makeText(ReportPotholeActivity.this, \"Thank you for reporting!\", Toast.LENGTH_LONG).show();\r\n                                    startActivity(new Intent(ReportPotholeActivity.this, HomeActivity.class));\r\n\r\n                                }\r\n                            });\r\n                            /*Toast.makeText(Image_video_upload.this, \"Upload Successful\", Toast.LENGTH_SHORT).show();\r\n                               Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n                               while (!urlTask.isSuccessful()) ;\r\n                               Uri downloadUrl = urlTask.getResult();\r\n                               Upload upload = new Upload(mEditTextFilename.getText().toString().trim(),downloadUrl.toString());\r\n                               String uploadId = mDatabaseRef.push().getKey();\r\n                               mDatabaseRef.child(uploadId).setValue(upload);*/\r\n\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(ReportPotholeActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    })\r\n                    .addOnProgressListener(new OnProgressListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onProgress(@NonNull UploadTask.TaskSnapshot taskSnapshot) {\r\n                            double progress = (100.0 * taskSnapshot.getBytesTransferred() / taskSnapshot.getTotalByteCount());\r\n                            mProgressBar.setProgress((int) progress);\r\n                        }\r\n                    });\r\n        }\r\n\r\n       /* if (mVideoUri != null){\r\n            StorageReference reference = mStorageRefVideo.child(System.currentTimeMillis()+\".\"+getfileExt(mVideoUri));\r\n\r\n            reference.putFile(mVideoUri)\r\n                    .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            mProgressBar.setVisibility(View.INVISIBLE);\r\n                            Toast.makeText(getApplicationContext(),\"Video Successfully Uploaded\",Toast.LENGTH_SHORT).show();\r\n                            Upload upload = new Upload(mEditTextFilename.getText().toString().trim(),\r\n                                    taskSnapshot.getUploadSessionUri().toString());\r\n                            String uploadId = mDatabaseRefVideo.push().getKey();\r\n                            mDatabaseRefVideo.child(uploadId).setValue(upload);\r\n                        }\r\n                    })\r\n\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n        }*/\r\n\r\n        else {\r\n            Toast.makeText(this,\"No File Selected\",Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n    private void uploadFile1(){\r\n        if (mImageUri != null) {\r\n            mProgressBar.setVisibility(View.VISIBLE);\r\n            final StorageReference fileReference = mStorageRef.child(System.currentTimeMillis()\r\n                    + \".\" + getFileExtension(mImageUri));\r\n            mUploadTask = fileReference.putFile(mImageUri)\r\n                    .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            mProgressBar.setProgress(0);\r\n                            fileReference.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                @Override\r\n                                public void onSuccess(final Uri uri) {\r\n                                    mProgressBar.setVisibility(View.INVISIBLE);\r\n\r\n                                    DateFormat dateFormat = new SimpleDateFormat(\"dd/MM\");\r\n                                    Date date = new Date();\r\n\r\n                                    DateFormat datefull = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n                                    Date date1 = new Date();\r\n                                    DateFormat timeformat = new SimpleDateFormat(\"HH:mm:ss\");\r\n                                    Date time = new Date();\r\n                                    String mPotholeType = mEditTextPothole_Type.getEditText().getText().toString();\r\n                                    String mAddress = mEditTextAddress.getEditText().getText().toString();\r\n                                    String mLandmark = mEditTextLandmark.getEditText().getText().toString();\r\n                                    String mDimension = mEditTextDimensions.getEditText().getText().toString().trim();\r\n                                    String mComment = mEditTextComments.getEditText().getText().toString();\r\n                                    String mDate = dateFormat.format(date).toString();\r\n                                    String mDateFull = datefull.format(date1).toString();\r\n                                    String mTime = timeformat.format(time).toString();\r\n\r\n//                                    mDatabaseRef.child(currentUserID).addValueEventListener(new ValueEventListener() {\r\n//                                        @Override\r\n//                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                                            if(snapshot.exists()){\r\n//                                                if (snapshot.child(\"videourl\").exists()){\r\n//                                                    String mVideo = String.valueOf(snapshot.child(\"videourl\").getValue());\r\n//                                                    DateFormat dateFormat = new SimpleDateFormat(\"dd/MM\");\r\n//                                                    Date date = new Date();\r\n//\r\n//                                                    DateFormat datefull = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n//                                                    Date date1 = new Date();\r\n//                                                    DateFormat timeformat = new SimpleDateFormat(\"HH:mm:ss\");\r\n//                                                    Date time = new Date();\r\n//                                                    String mPotholeType = mEditTextPothole_Type.getEditText().getText().toString();\r\n//                                                    String mAddress = mEditTextAddress.getEditText().getText().toString();\r\n//                                                    String mLandmark = mEditTextLandmark.getEditText().getText().toString();\r\n//                                                    String mDimension = mEditTextDimensions.getEditText().getText().toString().trim();\r\n//                                                    String mComment = mEditTextComments.getEditText().getText().toString();\r\n//                                                    String mDate = dateFormat.format(date).toString();\r\n//                                                    String mDateFull = datefull.format(date1).toString();\r\n//                                                    String mTime = timeformat.format(time).toString();\r\n//\r\n//                                                   // DatabaseReference ref = FirebaseDatabase.getInstance().getReference().child(\"Users\").child(\"Citizens\");\r\n//\r\n//                                                    HashMap<String, Object> userMap = new HashMap<>();\r\n//                                                    userMap.put(\"ImageUrl\", uri.toString());\r\n//                                                    userMap.put(\"mPotholeType\", mPotholeType);\r\n//                                                    userMap.put(\"mAddress\", mAddress);\r\n//                                                    userMap.put(\"mLandmark\", mLandmark);\r\n//                                                    userMap.put(\"mDimension\", mDimension);\r\n//                                                    userMap.put(\"mComment\", mComment);\r\n//                                                    userMap.put(\"mDate\", mDate);\r\n//                                                    userMap.put(\"mDateFull\", mDateFull);\r\n//                                                    userMap.put(\"mTime\", mTime);\r\n//                                                    userMap.put(\"mVideo\", mVideo);\r\n//\r\n//                                                    mDatabaseRef.child(currentUserID).updateChildren(userMap);\r\n//\r\n//                                                }\r\n//                                            }\r\n//                                        }\r\n//\r\n//                                        @Override\r\n//                                        public void onCancelled(@NonNull DatabaseError error) {\r\n//\r\n//                                        }\r\n//                                    });\r\n\r\n                                    Upload upload = new Upload(uri.toString(), mPotholeType, mAddress, mLandmark, mDimension, mComment, mDate, mDateFull, mTime);\r\n                                    String uploadId = mDatabaseRef.push().getKey();\r\n                                    assert uploadId != null;\r\n                                    mDatabaseRef.child(uploadId).setValue(upload);\r\n\r\n                                }\r\n                            });\r\n                            /*Toast.makeText(Image_video_upload.this, \"Upload Successful\", Toast.LENGTH_SHORT).show();\r\n                               Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n                               while (!urlTask.isSuccessful()) ;\r\n                               Uri downloadUrl = urlTask.getResult();\r\n                               Upload upload = new Upload(mEditTextFilename.getText().toString().trim(),downloadUrl.toString());\r\n                               String uploadId = mDatabaseRef.push().getKey();\r\n                               mDatabaseRef.child(uploadId).setValue(upload);*/\r\n\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(ReportPotholeActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    })\r\n                    .addOnProgressListener(new OnProgressListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onProgress(@NonNull UploadTask.TaskSnapshot taskSnapshot) {\r\n                            double progress = (100.0 * taskSnapshot.getBytesTransferred() / taskSnapshot.getTotalByteCount());\r\n                            mProgressBar.setProgress((int) progress);\r\n                        }\r\n                    });\r\n        }\r\n\r\n       /* if (mVideoUri != null){\r\n            StorageReference reference = mStorageRefVideo.child(System.currentTimeMillis()+\".\"+getfileExt(mVideoUri));\r\n\r\n            reference.putFile(mVideoUri)\r\n                    .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            mProgressBar.setVisibility(View.INVISIBLE);\r\n                            Toast.makeText(getApplicationContext(),\"Video Successfully Uploaded\",Toast.LENGTH_SHORT).show();\r\n                            Upload upload = new Upload(mEditTextFilename.getText().toString().trim(),\r\n                                    taskSnapshot.getUploadSessionUri().toString());\r\n                            String uploadId = mDatabaseRefVideo.push().getKey();\r\n                            mDatabaseRefVideo.child(uploadId).setValue(upload);\r\n                        }\r\n                    })\r\n\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            Toast.makeText(getApplicationContext(),e.getMessage(),Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n        }*/\r\n\r\n        else {\r\n            Toast.makeText(this,\"No File Selected\",Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    protected void makeRequest() {\r\n        ActivityCompat.requestPermissions(this,\r\n                new String[]{Manifest.permission.RECORD_AUDIO},\r\n                MicrophoneHelper.REQUEST_PERMISSION);\r\n    }\r\n    //Record a message via Watson Speech to Text\r\n    private void recordMessage() {\r\n        if (listening != true) {\r\n            capture = microphoneHelper.getInputStream(true);\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        speechService.recognizeUsingWebSocket(getRecognizeOptions(capture), new MicrophoneRecognizeDelegate());\r\n                    } catch (Exception e) {\r\n                        showError(e);\r\n                    }\r\n                }\r\n            }).start();\r\n            listening = true;\r\n            Toast.makeText(ReportPotholeActivity.this, \"Listening....Click to Stop\", Toast.LENGTH_LONG).show();\r\n\r\n        } else {\r\n            try {\r\n                microphoneHelper.closeInputStream();\r\n                listening = false;\r\n                Toast.makeText(ReportPotholeActivity.this, \"Stopped Listening....Click to Start\", Toast.LENGTH_LONG).show();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check Internet Connection\r\n     *\r\n     * @return\r\n     */\r\n    private boolean checkInternetConnection() {\r\n        // get Connectivity Manager object to check connection\r\n        ConnectivityManager cm =\r\n                (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n        boolean isConnected = activeNetwork != null &&\r\n                activeNetwork.isConnectedOrConnecting();\r\n\r\n        // Check for network connections\r\n        if (isConnected) {\r\n            return true;\r\n        } else {\r\n            Toast.makeText(this, \" No Internet Connection available \", Toast.LENGTH_LONG).show();\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    //Private Methods - Speech to Text\r\n    private RecognizeOptions getRecognizeOptions(InputStream audio) {\r\n        return new RecognizeOptions.Builder()\r\n                .audio(audio)\r\n                .contentType(ContentType.OPUS.toString())\r\n                .model(\"en-US_BroadbandModel\")\r\n                .interimResults(true)\r\n                .inactivityTimeout(2000)\r\n                .build();\r\n    }\r\n\r\n    private void showMicText(final String text) {\r\n        runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                inputMessage.setText(text);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void enableMicButton() {\r\n        runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                btnRecord.setEnabled(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void showError(final Exception e) {\r\n        runOnUiThread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Toast.makeText(ReportPotholeActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n    }\r\n\r\n    //Watson Speech to Text Methods.\r\n    private class MicrophoneRecognizeDelegate extends BaseRecognizeCallback {\r\n        @Override\r\n        public void onTranscription(SpeechRecognitionResults speechResults) {\r\n            if (speechResults.getResults() != null && !speechResults.getResults().isEmpty()) {\r\n                String text = speechResults.getResults().get(0).getAlternatives().get(0).getTranscript();\r\n                showMicText(text);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onError(Exception e) {\r\n            showError(e);\r\n            enableMicButton();\r\n        }\r\n\r\n        @Override\r\n        public void onDisconnected() {\r\n            enableMicButton();\r\n        }\r\n\r\n    }\r\n\r\n    public void getSpeechInput(View view) {\r\n\r\n        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\r\n\r\n        if (intent.resolveActivity(getPackageManager()) != null) {\r\n            startActivityForResult(intent, 10);\r\n        } else {\r\n            Toast.makeText(this, \"Your Device Don't Support Speech Input\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    }
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/citizensapp/ReportPotholeActivity.java	(revision d1950a1a8b7ba9f725fe1493ecadb36f0ba36dab)
+++ app/src/main/java/com/example/citizensapp/ReportPotholeActivity.java	(date 1595968729670)
@@ -1,29 +1,16 @@
 package com.example.citizensapp;
 
-import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
-import androidx.appcompat.app.AlertDialog;
-import androidx.appcompat.app.AppCompatActivity;
-import androidx.cardview.widget.CardView;
-import androidx.core.app.ActivityCompat;
-import androidx.core.content.ContextCompat;
-import androidx.core.content.FileProvider;
-
 import android.Manifest;
-import android.annotation.SuppressLint;
-import android.app.ActionBar;
 import android.content.ContentResolver;
 import android.content.Context;
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.content.pm.PackageManager;
-import android.graphics.Typeface;
 import android.net.ConnectivityManager;
 import android.net.NetworkInfo;
 import android.net.Uri;
 import android.os.Bundle;
 import android.os.Environment;
-import android.os.Message;
 import android.provider.MediaStore;
 import android.speech.RecognizerIntent;
 import android.util.Log;
@@ -34,69 +21,65 @@
 import android.widget.ImageButton;
 import android.widget.ImageView;
 import android.widget.LinearLayout;
-import android.widget.MediaController;
 import android.widget.ProgressBar;
-import android.widget.RelativeLayout;
 import android.widget.TextView;
 import android.widget.Toast;
 import android.widget.VideoView;
 
-import com.google.android.gms.tasks.Continuation;
-import com.google.android.gms.tasks.OnCompleteListener;
+import androidx.annotation.NonNull;
+import androidx.annotation.Nullable;
+import androidx.appcompat.app.AlertDialog;
+import androidx.appcompat.app.AppCompatActivity;
+import androidx.cardview.widget.CardView;
+import androidx.core.app.ActivityCompat;
+import androidx.core.content.ContextCompat;
+import androidx.core.content.FileProvider;
+
+import com.google.android.gms.common.GooglePlayServicesNotAvailableException;
+import com.google.android.gms.common.GooglePlayServicesRepairableException;
+import com.google.android.gms.location.places.ui.PlacePicker;
 import com.google.android.gms.tasks.OnFailureListener;
 import com.google.android.gms.tasks.OnSuccessListener;
-import com.google.android.gms.tasks.Task;
 import com.google.android.material.textfield.TextInputLayout;
 import com.google.firebase.auth.FirebaseAuth;
-import com.google.firebase.auth.FirebaseUser;
-import com.google.firebase.database.DataSnapshot;
-import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
 import com.google.firebase.database.FirebaseDatabase;
-import com.google.firebase.database.ValueEventListener;
 import com.google.firebase.storage.FirebaseStorage;
 import com.google.firebase.storage.OnProgressListener;
 import com.google.firebase.storage.StorageReference;
 import com.google.firebase.storage.StorageTask;
 import com.google.firebase.storage.UploadTask;
-import com.squareup.picasso.Picasso;
-
-import java.io.File;
-import java.io.IOException;
-
-import java.io.InputStream;
-import java.text.DateFormat;
-import java.text.SimpleDateFormat;
-import java.util.ArrayList;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.List;
-import java.util.Locale;
-
-import com.ibm.cloud.sdk.core.http.HttpMediaType;
 import com.ibm.cloud.sdk.core.http.Response;
-import com.ibm.cloud.sdk.core.http.ServiceCall;
 import com.ibm.cloud.sdk.core.security.IamAuthenticator;
-import com.ibm.watson.assistant.v2.model.DialogNodeOutputOptionsElement;
-import com.ibm.watson.assistant.v2.model.RuntimeResponseGeneric;
+import com.ibm.watson.assistant.v2.Assistant;
+import com.ibm.watson.assistant.v2.model.SessionResponse;
 import com.ibm.watson.developer_cloud.android.library.audio.MicrophoneHelper;
 import com.ibm.watson.developer_cloud.android.library.audio.MicrophoneInputStream;
 import com.ibm.watson.developer_cloud.android.library.audio.StreamPlayer;
 import com.ibm.watson.developer_cloud.android.library.audio.utils.ContentType;
-import com.ibm.watson.assistant.v2.Assistant;
-import com.ibm.watson.assistant.v2.model.CreateSessionOptions;
-import com.ibm.watson.assistant.v2.model.MessageInput;
-import com.ibm.watson.assistant.v2.model.MessageOptions;
-import com.ibm.watson.assistant.v2.model.MessageResponse;
-import com.ibm.watson.assistant.v2.model.SessionResponse;
 import com.ibm.watson.speech_to_text.v1.SpeechToText;
 import com.ibm.watson.speech_to_text.v1.model.RecognizeOptions;
 import com.ibm.watson.speech_to_text.v1.model.SpeechRecognitionResults;
 import com.ibm.watson.speech_to_text.v1.websocket.BaseRecognizeCallback;
 import com.ibm.watson.text_to_speech.v1.TextToSpeech;
-import com.ibm.watson.text_to_speech.v1.model.SynthesizeOptions;
+import com.squareup.picasso.Picasso;
+import com.twitter.sdk.android.core.models.Place;
+
+import java.io.File;
+import java.io.IOException;
+import java.io.InputStream;
+import java.text.DateFormat;
+import java.text.SimpleDateFormat;
+import java.util.ArrayList;
+import java.util.Date;
+import java.util.Locale;
 
 public class ReportPotholeActivity extends AppCompatActivity {
+
+    private static final int PLACE_PICKER_REQUEST = 11;
+    Button btpicker;
+    EditText dimension;
+
 //    private RecyclerView recyclerView;
 //    private ChatAdapter mAdapter;
     private ArrayList messageArrayList;
@@ -167,6 +150,22 @@
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_report_pothole);
 
+        dimension=findViewById(R.id.dimension);
+        btpicker = findViewById(R.id.map_location_picker);
+        btpicker.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View view) {
+                PlacePicker.IntentBuilder builder = new PlacePicker.IntentBuilder();
+                try {
+                    startActivityForResult(builder.build(ReportPotholeActivity.this), PLACE_PICKER_REQUEST);
+                }catch (GooglePlayServicesRepairableException e){
+                    e.printStackTrace();
+                }catch (GooglePlayServicesNotAvailableException e){
+                    e.printStackTrace();
+                }
+            }
+        });
+
         inputMessage = findViewById(R.id.potholes_comments_textview);
         btnRecord = findViewById(R.id.btn_record);
 //        String customFont = "Montserrat-Regular.ttf";
@@ -354,6 +353,21 @@
                     inputMessage.setText(result.get(0));
                 }
                 break;
+            case PLACE_PICKER_REQUEST:
+                if (resultCode == RESULT_OK) {
+                    com.google.android.gms.location.places.Place place = PlacePicker.getPlace(data, this);
+                    StringBuilder stringBuilder = new StringBuilder();
+                    String latitude = String.valueOf(((com.google.android.gms.location.places.Place) place).getLatLng().latitude);
+                    String longitude = String.valueOf(((com.google.android.gms.location.places.Place) place).getLatLng().longitude);
+                    stringBuilder.append("LATITUDE : ");
+                    stringBuilder.append(latitude);
+                    stringBuilder.append("\n");
+                    stringBuilder.append("LONGITUDE : ");
+                    stringBuilder.append(longitude);
+                    dimension.setText(stringBuilder.toString());
+                }
+                break;
+
         }
 
 
Index: app/src/main/res/layout/activity_report_pothole.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ReportPotholeActivity\">\r\n\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/rlayout\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/actionBar\"\r\n            android:background=\"@color/colorPrimary\">\r\n\r\n            <include\r\n                android:layout_marginStart=\"-15dp\"\r\n                android:layout_toRightOf=\"@id/back_button\"\r\n                android:layout_alignParentTop=\"true\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                layout=\"@layout/action_bar\"/>\r\n\r\n            <ImageView\r\n                android:scaleX=\"0.85\"\r\n                android:scaleY=\"0.85\"\r\n                android:paddingStart=\"15dp\"\r\n                android:layout_centerVertical=\"true\"\r\n                android:id=\"@+id/back_button\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:src=\"@drawable/ic_baseline_arrow_back_24\"\r\n                android:background=\"@null\"/>\r\n\r\n        </RelativeLayout>\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_below=\"@id/actionBar\"\r\n            android:id=\"@+id/cv\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            app:cardCornerRadius=\"10dp\"\r\n            app:cardElevation=\"4dp\">\r\n\r\n            <ScrollView\r\n                android:id=\"@+id/sv1\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\">\r\n\r\n                <RelativeLayout\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:padding=\"15dp\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/pothole_image_textview\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"Take image of pothole\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <androidx.cardview.widget.CardView\r\n                        app:cardCornerRadius=\"10dp\"\r\n                        android:id=\"@+id/pothole_image_layout\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"200dp\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:layout_below=\"@id/pothole_image_textview\">\r\n\r\n                        <View\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:background=\"#EBECEB\"/>\r\n\r\n                        <ImageView\r\n                            android:id=\"@+id/pothole_image_view\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"\r\n                            android:scaleType=\"centerCrop\"\r\n                            android:src=\"@null\"/>\r\n\r\n                        <LinearLayout\r\n                            android:id=\"@+id/upload_image_hint_view\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_gravity=\"center\"\r\n                            android:orientation=\"horizontal\">\r\n\r\n                            <TextView\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:text=\"Upload Image: \"/>\r\n\r\n                            <ImageView\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_margin=\"1dp\"\r\n                                android:src=\"@drawable/ic_menu_camera\"\r\n                                android:alpha=\"0.5\"/>\r\n\r\n                            <TextView\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:text=\" Camera  | \"/>\r\n\r\n                            <ImageView\r\n                                android:layout_width=\"match_parent\"\r\n                                android:layout_height=\"match_parent\"\r\n                                android:layout_margin=\"1dp\"\r\n                                android:src=\"@drawable/ic_menu_gallery\"\r\n                                android:alpha=\"0.5\"/>\r\n\r\n                            <TextView\r\n                                android:layout_width=\"wrap_content\"\r\n                                android:layout_height=\"wrap_content\"\r\n                                android:text=\" Gallery\"/>\r\n\r\n                        </LinearLayout>\r\n\r\n                    </androidx.cardview.widget.CardView>\r\n\r\n                    <TextView\r\n                        android:layout_marginTop=\"10dp\"\r\n                        android:id=\"@+id/pothole_remove_image_button\"\r\n                        android:visibility=\"gone\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginEnd=\"15dp\"\r\n                        android:layout_below=\"@id/pothole_image_layout\"\r\n                        android:layout_centerHorizontal=\"true\"\r\n                        android:text=\"Remove Image\"\r\n                        android:textSize=\"14sp\"/>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:id=\"@+id/pothole_type_textView\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:hint=\"Type of Pothole\"\r\n                        android:layout_below=\"@id/pothole_remove_image_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:drawablePadding=\"15dp\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:padding=\"10dp\"\r\n                            android:maxLines=\"1\"\r\n                            android:drawableLeft=\"@drawable/ic_round_category_24\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:id=\"@+id/pothole_landmark_textview\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:hint=\"Landmark\"\r\n                        android:layout_below=\"@id/pothole_type_textView\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:drawablePadding=\"15dp\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:padding=\"10dp\"\r\n                            android:drawableLeft=\"@drawable/ic_round_location_city_24\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:id=\"@+id/pothole_address_textView\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:hint=\"Address\"\r\n                        android:layout_below=\"@id/pothole_landmark_textview\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:drawablePadding=\"15dp\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:padding=\"10dp\"\r\n                            android:drawableLeft=\"@drawable/ic_baseline_map_24\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/pothole_location_textView\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@+id/pothole_address_textView\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:text=\"Location\"\r\n                        android:textColor=\"@color/colorPrimaryDark\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <androidx.cardview.widget.CardView\r\n                        android:layout_below=\"@id/pothole_location_textView\"\r\n                        android:id=\"@+id/map_card_view\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"200dp\"\r\n                        android:layout_marginTop=\"15dp\"\r\n                        app:cardCornerRadius=\"10dp\">\r\n\r\n                        <!-- TODO: Replace this ImageView with MapView -->\r\n                        <ImageView\r\n                            android:scaleType=\"centerCrop\"\r\n                            android:src=\"@drawable/map\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"match_parent\"/>\r\n\r\n                        <TextView\r\n                            android:alpha=\"0.7\"\r\n                            android:layout_marginBottom=\"5dp\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tap here to Modify\"\r\n                            android:layout_gravity=\"bottom\"\r\n                            android:textAlignment=\"center\"\r\n                            tools:ignore=\"RtlCompat\" />\r\n\r\n                    </androidx.cardview.widget.CardView>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:id=\"@+id/pothole_dimension_textview\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:hint=\"Dimensions (Optional)\"\r\n                        android:layout_below=\"@id/map_card_view\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:drawablePadding=\"15dp\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:padding=\"10dp\"\r\n                            android:drawableLeft=\"@drawable/ic_round_format_shapes_24\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n                    <androidx.appcompat.widget.AppCompatImageButton\r\n                        android:id=\"@+id/btn_record\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_marginTop=\"10dp\"\r\n                        android:background=\"@null\"\r\n                        android:elevation=\"0dp\"\r\n                        android:layout_below=\"@id/pothole_dimension_textview\"\r\n                        android:scaleType=\"fitCenter\"\r\n                        android:src=\"@mipmap/ic_mic\" />\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/potholes_comments_textview\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:layout_toRightOf=\"@id/btn_record\"\r\n                        android:layout_below=\"@id/pothole_dimension_textview\"\r\n                        android:hint=\"Comments (Optional)\"\r\n                        android:layout_marginTop=\"10dp\"></EditText>\r\n\r\n<!--                    <com.google.android.material.textfield.TextInputLayout-->\r\n<!--                        android:id=\"@+id/potholes_comments_textview\"-->\r\n<!--                        android:layout_width=\"match_parent\"-->\r\n<!--                        android:layout_height=\"wrap_content\"-->\r\n<!--                        android:hint=\"Comments (Optional)\"-->\r\n<!--                        android:layout_toRightOf=\"@id/btn_record\"-->\r\n<!--                        android:layout_below=\"@id/pothole_dimension_textview\">-->\r\n\r\n<!--                        <com.google.android.material.textfield.TextInputEditText-->\r\n<!--                            android:drawablePadding=\"15dp\"-->\r\n<!--                            android:layout_width=\"match_parent\"-->\r\n<!--                            android:layout_height=\"wrap_content\"-->\r\n<!--                            android:padding=\"10dp\" />-->\r\n\r\n<!--                    </com.google.android.material.textfield.TextInputLayout>-->\r\n\r\n<!--                    <Button-->\r\n<!--                        android:textSize=\"15sp\"-->\r\n<!--                        android:id=\"@+id/video_view_button\"-->\r\n<!--                        android:layout_width=\"wrap_content\"-->\r\n<!--                        android:layout_height=\"wrap_content\"-->\r\n<!--                        android:fontFamily=\"monospace\"-->\r\n<!--                        android:layout_below=\"@id/potholes_comments_textview\"-->\r\n<!--                        style=\"?android:attr/borderlessButtonStyle\"-->\r\n<!--                        android:text=\"Do you want to take video of the pothole?\"-->\r\n<!--                        android:textAllCaps=\"false\"/>-->\r\n\r\nd\r\n                    <com.google.android.material.card.MaterialCardView\r\n                        android:layout_marginTop=\"15dp\"\r\n                        android:layout_below=\"@id/potholes_comments_textview\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        app:cardBackgroundColor=\"@color/colorPrimary\"\r\n                        app:cardCornerRadius=\"5dp\"\r\n                        android:layout_marginBottom=\"20dp\">\r\n\r\n                        <Button\r\n                            android:textSize=\"15sp\"\r\n                            android:id=\"@+id/p_button_continue\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:fontFamily=\"monospace\"\r\n                            style=\"?android:attr/borderlessButtonStyle\"\r\n                            android:text=\"Continue\"\r\n                            android:textAllCaps=\"false\"/>\r\n\r\n                    </com.google.android.material.card.MaterialCardView>\r\n\r\n                </RelativeLayout>\r\n\r\n            </ScrollView>\r\n\r\n        </androidx.cardview.widget.CardView>\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/rlayout2\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignLeft=\"@+id/cv\"\r\n            android:layout_alignRight=\"@+id/cv\"\r\n            android:layout_alignBottom=\"@+id/cv\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginLeft=\"35dp\"\r\n            android:layout_marginRight=\"35dp\"\r\n            android:layout_marginBottom=\"-20dp\"\r\n            android:elevation=\"10dp\">\r\n\r\n\r\n        </RelativeLayout>\r\n    </RelativeLayout>\r\n    <ProgressBar\r\n        android:layout_centerInParent=\"true\"\r\n        android:layout_marginBottom=\"40dp\"\r\n        android:id=\"@+id/progress_bar\"\r\n        android:visibility=\"invisible\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        />\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_report_pothole.xml	(revision d1950a1a8b7ba9f725fe1493ecadb36f0ba36dab)
+++ app/src/main/res/layout/activity_report_pothole.xml	(date 1595968212249)
@@ -216,15 +216,12 @@
                             android:layout_width="match_parent"
                             android:layout_height="match_parent"/>
 
-                        <TextView
-                            android:alpha="0.7"
-                            android:layout_marginBottom="5dp"
+                        <Button
+                            android:id="@+id/map_location_picker"
                             android:layout_width="match_parent"
                             android:layout_height="wrap_content"
                             android:text="Tap here to Modify"
-                            android:layout_gravity="bottom"
-                            android:textAlignment="center"
-                            tools:ignore="RtlCompat" />
+                            android:layout_gravity="bottom" />
 
                     </androidx.cardview.widget.CardView>
 
@@ -237,6 +234,7 @@
                         android:layout_below="@id/map_card_view">
 
                         <com.google.android.material.textfield.TextInputEditText
+                            android:id="@+id/dimension"
                             android:drawablePadding="15dp"
                             android:layout_width="match_parent"
                             android:layout_height="wrap_content"
@@ -262,7 +260,7 @@
                         android:layout_toRightOf="@id/btn_record"
                         android:layout_below="@id/pothole_dimension_textview"
                         android:hint="Comments (Optional)"
-                        android:layout_marginTop="10dp"></EditText>
+                        android:layout_marginTop="10dp" />
 
 <!--                    <com.google.android.material.textfield.TextInputLayout-->
 <!--                        android:id="@+id/potholes_comments_textview"-->
@@ -291,7 +289,7 @@
 <!--                        android:text="Do you want to take video of the pothole?"-->
 <!--                        android:textAllCaps="false"/>-->
 
-d
+
                     <com.google.android.material.card.MaterialCardView
                         android:layout_marginTop="15dp"
                         android:layout_below="@id/potholes_comments_textview"
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.0.1'\r\n        classpath 'com.google.gms:google-services:4.3.3'\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        maven { url \"https://oss.sonatype.org/content/repositories/snapshots\" }\r\n        maven { url 'https://maven.fabric.io/public' }\r\n        mavenCentral()\r\n        google()\r\n        jcenter()\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- build.gradle	(revision d1950a1a8b7ba9f725fe1493ecadb36f0ba36dab)
+++ build.gradle	(date 1596052340359)
@@ -5,7 +5,7 @@
         jcenter()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:4.0.1'
+        classpath 'com.android.tools.build:gradle:4.2.0-alpha05'
         classpath 'com.google.gms:google-services:4.3.3'
 
         // NOTE: Do not place your application dependencies here; they belong
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Sat Jul 18 14:39:43 IST 2020\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.1.1-all.zip\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1252
===================================================================
--- gradle/wrapper/gradle-wrapper.properties	(revision d1950a1a8b7ba9f725fe1493ecadb36f0ba36dab)
+++ gradle/wrapper/gradle-wrapper.properties	(date 1596052353203)
@@ -1,6 +1,6 @@
-#Sat Jul 18 14:39:43 IST 2020
+#Thu Jul 30 01:22:33 IST 2020
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.1.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-all.zip
